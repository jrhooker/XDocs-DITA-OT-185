<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\temp\temp20190509171902990\Trident\device\devspec\hotplug?><?workdir-uri file:/C:/Git/XDocs-DITA-OT-185/XDocs-DITA-OT-185/DITA-OT1.8.5/temp/temp20190509171902990/Trident/device/devspec/hotplug/?><?path2project ..\?><?path2project-uri ../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" ditaarch:DITAArchVersion="1.2" class="- topic/topic " xml:lang="en-US" base="base" id="trident_pcie_hotplug_surprise_down_howitworks" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)                            (topic struct-d)                            (topic firmware-d)                            (topic pmcrevhis-d)   " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="topic:1;11:27">
   <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="title:1;14:26">How it Works - Surprise Down Errors</title>
   <body class="- topic/body " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="body:1;17:24">
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:1;20:21">Switchtec was designed to support two main use cases when it comes to Surprise Down Errors (SDERR)</p>
      <ul class="- topic/ul " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="ul:1;23:23">
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="li:1;26:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:2;29:27">Contain SDERR and prevent the propagation of ERR_FATAL to the host (via DPC)</p>
         </li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="li:2;33:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:3;36:27">Propagate the SDERR and resulting ERR_FATAL to the host to allow host system to manage and trap it</p>
         </li>
      </ul>
      <section id="section_Using_DPC_to_contain_SDERR_0j3vw8pme" class="- topic/section " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="section:1;42:33">
         <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="title:2;45:32">SDERR propagation when DPC is enabled</title>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:4;48:24">Switchtec supports PCIe Base Specification 4.0 definition of DPC and eDPC. When an EP is hot-removed and Surprise Down Error Reporting Capable is set, a surprise down error (SDERR) will be reported. By default, surprise down is considered an uncorrectable fatal error (ERR_FATAL). </p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:5;51:24">If DPC is enabled and triggering on ERR_FATAL, the surprise down error will ultimately trigger DPC and put the downstream port into containment as illustrated in <xref href="#trident_pcie_hotplug_surprise_down_howitworks/fig_SDERR_propagation_with_DPC_enabled_1j3vw8pme" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="xref:1;54:33" type="fig"><?ditaot gentext?>Figure 1</xref>. AER will log the error event but no ERR_FATAL will be propagated to the host.</p>
         <note audience="MSCCInternal" class="- topic/note " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="note:1;58:30">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:6;61:27">Source Graphics: http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=422943</p>
         </note>
         <fig id="fig_SDERR_propagation_with_DPC_enabled_1j3vw8pme" class="- topic/fig " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="fig:1;66:28">
            <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="title:3;69:35">SDERR propagation with DPC enabled</title>
            <image href="graphics/sar_pcie_hotplug_sderr_dpc.png" width="4in" placement="inline" class="- topic/image " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="image:1;75:36"/>
         </fig>
      </section>
      <section id="section_SDERR_propagation_when_DPC_is_disabled_2j3vweyu9" class="- topic/section " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="section:2;81:33">
         <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="title:4;84:32">SDERR propagation when DPC is disabled</title>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:7;87:24">When DPC is not enabled, Switchtec will propagate SDERR and the resulting ERR_FATAL report to the host as specified in PCIe Base Specification 4.0. In some cases, ERR_FATAL may be desired in firmware-first system models where the system firmware (BIOS) is instrumented to trap on ERR_FATAL in order to perform system level error containment. <xref href="#trident_pcie_hotplug_surprise_down_howitworks/fig_SDERR_propagation_when_DPC_is_not_enable_3j3vweyu9" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="xref:2;90:33" type="fig"><?ditaot gentext?>Figure 2</xref> illustrates the handling of a surprise down error when DPC is not enabled.</p>
         <note audience="MSCCInternal" class="- topic/note " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="note:2;94:30">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:8;97:27">Source Graphics: http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=422943</p>
         </note>
         <fig id="fig_SDERR_propagation_when_DPC_is_not_enable_3j3vweyu9" class="- topic/fig " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="fig:2;102:28">
            <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="title:5;105:35">SDERR propagation when DPC is not enabled</title>
            <image href="graphics/sar_pcie_hotplug_sderr_nodpc.png" width="4in" placement="inline" class="- topic/image " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="image:2;111:36"/>
         </fig>
      </section>
      <section id="section_A_Note_on_Hot_Plug_Surprise_Capability_0jabew20k" class="- topic/section " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="section:3;117:33">
         <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="title:6;120:32">A Note on Hot Plug Surprise Capability</title>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:9;123:24">The <ph class="- topic/ph " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="ph:1;125:29">Switchtec </ph>downstream P2P Slot Capabilities Register contains<ph class="- topic/ph " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="ph:2;127:29"> two</ph> hot-plug related bit<ph class="- topic/ph " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="ph:3;129:29">s</ph>:</p>
         <ul class="- topic/ul " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="ul:2;132:26">
            <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="li:3;135:29">
               <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:10;138:31">Hot-plug Capable - Must be 1b to enable hot plug handling </p>
            </li>
            <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="li:4;142:29">
               <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:11;145:31">Hot-plug Surprise - Must be 0b to make use of DPC </p>
            </li>
         </ul>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="p:12;150:25">In a system where DPC is not enabled by the host/OS but hot plug needs to be supported, MSCC recommends enabling DPC directly in the switch and utilizing Switchtec DPC auto-clear. Information on enabling the two features to support DPC in a non-DPC enabled ecosystem (DPC Trigger Enable via Patch table and DPC auto-clear) can be found in the online knowledge base article here: <xref href="https://kb.microsemi.com/display/SDS/%5BHow-To%5D+-+Manually+enabling+DPC+support+in+Switchtec" scope="external" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\hotplug\trident_pcie_hotplug_surprise_down_howitworks.xml" xtrc="xref:3;154:33"><?ditaot usertext?>[How-To] - Manually enabling DPC support in Switchtec</xref>.</p>
      </section>
   </body>
</topic>