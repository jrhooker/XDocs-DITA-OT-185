<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\temp\temp20190509171902990\Trident\device\devspec\multicast?><?workdir-uri file:/C:/Git/XDocs-DITA-OT-185/XDocs-DITA-OT-185/DITA-OT1.8.5/temp/temp20190509171902990/Trident/device/devspec/multicast/?><?path2project ..\?><?path2project-uri ../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" ditaarch:DITAArchVersion="1.2" class="- topic/topic " xml:lang="en-US" base="base" id="xd_08cef1cfef72fe0d--88e2819-151b0d23486--740a" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)                            (topic struct-d)                            (topic firmware-d)                            (topic pmcrevhis-d)   " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="topic:1;11:27">
   <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="title:1;14:26">Non-Transparent Multicast Operation</title>
   <body class="- topic/body " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="body:1;17:24">
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:1;20:21">This section describes Switchtec Non-Transparent (NT) Multicast. NT Multicast allows TLPs received by a port to be sent to one or more output ports located in other switch partitions. NT Multicast requires the presence of an NT EP function in the upstream port of all partitions that will send or receive the NT Multicast TLPs.</p>
      <section audience="MSCCInternal" class="- topic/section " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="section:1;24:33">
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:2;27:24">The switch configuration shown in the following diagram is the example topology in which there are two PCIe partitions in the switch. The two upstream ports include an upstream P2P Bridge and an NT EP associated with them.</p>
         <note audience="MSCCInternal" class="- topic/note " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="note:1;31:30">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:3;34:27">Source Graphics: <xref href="http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=438846" scope="external" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="xref:1;38:36"><?ditaot gentext?>http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=438846</xref>
            </p>
         </note>
         <fig id="d1e1652" class="- topic/fig " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="fig:1;44:28">
            <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="title:2;47:35">NT Multicast Topology</title>
            <image href="graphics/nt_multicast_overview.svg" placement="break" width="6in" class="- topic/image " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="image:1;53:36"/>
         </fig>
      </section>
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:4;58:21">Non-Transparent Multicast closely resembles Transparent Multicast with the following notable characteristics:</p>
      <ul class="- topic/ul " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="ul:1;61:23">
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="li:1;64:26">Multicast Capabilities configuration to subscribe to a specific MCG is identical for P2P Bridges and NT EPs</li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="li:2;67:26">MCG Subscriptions can be dynamically changed for a P2P or NT EP due to system software reconfiguration or hot plug without affecting traffic to all other functions in the switch</li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="li:3;70:26">Each NT EP includes a NT MCG Capable Register. These registers are used for configuring which MCGs can be sent to other partitions across the NT Interconnect. Any Multicast TLPs are transmitted for the enabled groups are sent to all ports in all NT partitions that are subscribed to that MCG.</li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="li:4;73:26">Only MCGs 15 to 0 can be configured as NT Capable. MCGs 63 to 0 support Transparent Multicast.</li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="li:5;76:26">TLPs that are transmitted across the NT Interconnect can use different MC Overlay processing at the egress port based on Source Partition and/or MCG</li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="li:6;79:26">Non-Transparent Multicast TLPs bypass all ingress NT Processing; the Address is not translated according to the NTB Translation windows, AT and NoSnoop are not modified.</li>
      </ul>
      <section audience="MSCCInternal" class="- topic/section " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="section:2;84:33">
         <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="title:3;87:32">NT Multicast details</title>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:5;90:24">NT Multicast operation requires that the Memory Access Enable (MAE) control be enabled in the PCICMD register of the NT function that receives the Multicast packet. In particular, the NT function contains a Multicast Capability Structure as defined in the PCIe specification. This capability structure allows configuration of a Multicast range, segmentation of the range into Multicast windows, and association of these windows with Multicast groups. Each group is associated with a set of ports, located in other switch partitions, to which the Multicast TLP is delivered.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:6;93:24">When the upstream port operates in NT EP Only mode (i.e. It does not contain a P2P Bridge), NT Multicast allows TLPs received by the NT function to be Multicast to ports in other partitions.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:7;96:24">When the upstream port operates in a mode that contains a P2P Bridge and an NT EP, NT Multicast co-exists with Transparent Multicast. Transparent Multicast is configured to Multicast TLPs to ports within the partition, and NT Multicast configured to Multicast TLPs to ports in other partitions. TLPs sent to an egress port are processed as Transparent Multicast when the ingress and egress ports are in the same partition, and are processed as NT Multicast when the ingress and egress ports are different partitions.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:8;99:24">Processing of NT Multicast TLPs may be divided into the task of determining that a TLP is an NT Multicast TLP, sending the Multicast TLP to egress ports, and Multicast egress processing performed at each egress port.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:9;102:24">When the upstream port operates in NT EP Only mode the Multicast Capability structure of the NT EP is configured identically to the P2P Bridge in Transparent Multicast. MCGs 0 to 15 can be used for an NT EP Only upstream port; MCGs 16 to 63 cannot be used.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:10;105:25">When the upstream port operates in a mode that contains a P2P Bridge and an NT EP, the following register fields in the Multicast Capability Structure of the P2P Bridge and the NT EP must be configured to the same values: MCCTL Register: NUMGROUP, MCEN, MCBARL Register, INDEXPOS, MCBARL, MCBARH Register, MCBARH</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:11;108:25">Violating this requirement results in undefined behavior on receipt of a Multicast TLP. Non-Multicast TLPs are not affected.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:12;111:25">The above requirement implies that when Multicast is enabled, both transparent and NT Multicast are enabled. If there is no corresponding group bit set defined in NT MCG Capable Register, then no Multicast TLPs will pass between partitions.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:13;114:25">Further, the Multicast window location and size, and the number of Multicast groups must be configured identically for Transparent and NT Multicast.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:14;117:25">When NT Multicast is enabled in conjunction with Transparent Multicast, the number of MCGs for both Transparent and NT Multicast may be set to any value between 0 and the value of the MAXGROUP field in the Multicast Capability (MCCAP) register. NT Multicast is only performed for TLPs that fall into groups 0 to 15 that are configured as NT Capable.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:15;120:25">TLPs that fall in other groups are not NT Multicasted by the receiving port. The MAXGROUP field in the NT function’s MCCAP register has a default value of 0x15, to indicate support for groups 0 to 15. This field has RWL type and may be modified to a value between 0 to 63. Modifying this field allows the NT function to advertise support for up to 64 groups, which in turn allows system software to program the NUMGROUP field to a value between 0 and 63. Thus, in a partition in which Multicast and NT Multicast are enabled, it is possible to configure up to 64 MCGs.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:16;123:25">There are no restrictions on the location of the MC address region within a partition’s 64 bit address space. Multicast TLP Determination has precedence over all other address resolution, so the Multicast region can be placed anywhere in the Upstream Port’s configured address range.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:17;126:25">If the Multicast TLP’s group ID does not correspond to a set bit in the Multicast receive registers, the TLP is ignored by the receiving function and no further NT Multicast processing is done by this function. Note that the “block all” and “block untranslated” bits are not checked during NT Multicast processing.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:18;129:25">A received NT Multicast TLP without errors is forwarded to egress ports as described in the next section.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:19;132:25">There are two NT Multicast configuration modes: static and dynamic. Static configuration allows all register settings to be initialized using only the Configuration File and the Patch Table. Dynamic configuration is handled through MC Capability and MRPC Command. Configuration can be initiated by the management host or individually by each local host. Some common configuration is needed for with both static and dynamic configuration methods.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:20;135:25">1. Refer to <xref href="../../../../Saratoga/Saratoga_Configuration/Topic/MC_Enable_in_Switch_Core_Pipeline_2aibnybo8e.xml" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="xref:2;138:34" type="topic"><?ditaot gentext?>Enable Multicast</xref>
            <draft-comment author="yungwesl" time="Fri 01/12/2018 11:32 AM" translate="no" class="- topic/draft-comment " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="draft-comment:1;144:51">need updated links</draft-comment>.</p>
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="p:21;147:25">2. Refer to <xref href="../../../../Saratoga/Saratoga_Configuration/Topic/MC_Num_Overlays.xml" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\multicast\trident_mc_non_transparent_mc.xml" xtrc="xref:3;150:34" type="topic"><?ditaot gentext?>Number of MC Overlays</xref>. There are 64 MC Overlay entries at the egress of each stack. Users need to allocate overlay entries for each physical port in a stack in the Configuration File at initialization time.</p>
      </section>
   </body>
</topic>