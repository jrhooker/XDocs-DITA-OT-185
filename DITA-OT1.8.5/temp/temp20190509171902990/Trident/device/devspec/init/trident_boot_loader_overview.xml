<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\temp\temp20190509171902990\Trident\device\devspec\init?><?workdir-uri file:/C:/Git/XDocs-DITA-OT-185/XDocs-DITA-OT-185/DITA-OT1.8.5/temp/temp20190509171902990/Trident/device/devspec/init/?><?path2project ..\?><?path2project-uri ../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" ditaarch:DITAArchVersion="1.2" class="- topic/topic " xml:lang="en-US" base="base" id="trident_boot_loader_overview" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)                            (topic struct-d)                            (topic firmware-d)                            (topic pmcrevhis-d)   " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="topic:1;10:468">
   <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="title:1;13:26">Switchtec Boot Loader</title>
   <body class="- topic/body " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="body:1;16:32">
      <note class="- topic/note " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="note:1;20:32">
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:1;23:24">
            <draft-comment author="C33308" time="Tue 03/26/2019 08:12 AM" translate="no" class="- topic/draft-comment " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="draft-comment:1;29:51">Remove in RevB</draft-comment>The BOOT ROM and TWI RECOVERY are only available in the revision B switch. Revision A uses BOOT LOADER 1 (BL1), BOOT LOADER 2 (BL2), and UART Recovery out of SPI flash.</p>
      </note>
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:2;33:29">In revision A silicon, the first stage boot loader (BL1) resides in SPI <ph status="new" rev="deltaxml-add" class="- topic/ph " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="ph:1;33:137">NOR </ph>flash and provides a simple recovery mechanism to recover an invalid BL2 firmware image. If the primary BL2 image fails to boot (just after the BL2 firmware image update), Switchtec will automatically reboot and BL1 will choose the inactive BL2 image to boot. This allows users to use the firmware disaster recovery in BL2 to recover system. This recovery mechanism happens automatically and does not need user intervention.</p>
      <p class="- topic/p " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:3;37:29">In revision B silicon, Switchtec features an on-die Boot ROM which functions as a primary stage boot loader and disaster recovery path. BL1, in this case, provides a more comprehensive recovery mechanism via the TWI interface, including configuring chip security settings, updating firmware images, selecting the specified images for execution etc. The full detailed description for this recovery mechanism will be available in next release.</p>
      <p audience="MSCCInternal" class="- topic/p " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:4;42:29">The Boot ROM TWI recovery path configures TWI bus 0 as a TWI slave for code-load or image selection control by a TWI master. This mechanism provides several options to load and select FW partitions:</p>
      <ul audience="MSCCInternal" class="- topic/ul " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="ul:1;47:30">
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="li:1;50:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:5;53:27"> External USB to TWI programmer running Microsemi's code-load application (ChipLink) Initialization and Configuration </p>
         </li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="li:2;57:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:6;60:27"> Customer BMC to select active or backup images and to load updated FW</p>
         </li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="li:3;64:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:7;67:27"> Host platform to select active or backup images and to load updated FW</p>
         </li>
      </ul>
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:8;72:29">A secondary boot loader (BL2) exists inside the <ph status="new" rev="deltaxml-add" class="- topic/ph " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="ph:2;72:113">SPI </ph>NOR Flash and acts as a UART recovery path on UART[0] to allow for UART driven image selection (active/backup) as well as XMODEM code-load. The UART recovery mechanism runs the following <i class="+ topic/ph hi-d/i " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="i:1;75:32">default</i> parameters:</p>
      <ul class="- topic/ul " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="ul:2;79:30">
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="li:4;82:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:9;85:27">
               <b class="+ topic/ph hi-d/b " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="b:1;88:30">23400</b> bits per second</p>
         </li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="li:5;92:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:10;95:28">
               <b class="+ topic/ph hi-d/b " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="b:2;98:30">8</b> data bits</p>
         </li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="li:6;102:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:11;105:28">
               <b class="+ topic/ph hi-d/b " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="b:3;108:30">N</b>o parity bit </p>
         </li>
         <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="li:7;112:26">
            <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:12;115:28">
               <b class="+ topic/ph hi-d/b " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="b:4;118:30">1</b> stop bit </p>
         </li>
      </ul>
      <p class="- topic/p " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:13;124:29">The UART recovery parameters can be changed in the FW image partition header which can be re-built from the Switchtec FW package.</p>
      <note audience="MSCCInternal" class="- topic/note " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="note:2;129:32">
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:14;132:25">Source Graphics: <xref href="http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=441694" scope="external" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="xref:1;136:33"><?ditaot usertext?>http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=441694 </xref>
         </p>
      </note>
      <fig id="fig_Boot_Loader_Logical_Flow_0jg6zxyjj" class="- topic/fig " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="fig:1;143:31">
         <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="title:2;146:32">Boot Loader Logical Flow (RevB silicon)</title>
         <image href="graphics/trident_init_boot_loader_flow.svg" width="6in" placement="inline" class="- topic/image " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="image:1;152:33"/>
      </fig>
      <p class="- topic/p " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="p:15;157:29">In <xref href="#trident_boot_loader_overview/fig_Boot_Loader_Logical_Flow_0jg6zxyjj" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\init\trident_boot_loader_overview.xml" xtrc="xref:2;160:30" type="fig"><?ditaot gentext?>Figure 1</xref>, there are two BOOT_RECOVERY pins used to put the switch into recovery mode. BOOT_RECOVERY[0] is used to control TWI Recovery mode which is implemented in the primary boot loader (Boot ROM). BOOT_RECOVERY[1] is used to control UART Recovery mode which resides in the second stage boot loader (BL2).</p>
   </body>
</topic>