<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\temp\temp20190509171902990\Trident\device\devspec\ntb?><?workdir-uri file:/C:/Git/XDocs-DITA-OT-185/XDocs-DITA-OT-185/DITA-OT1.8.5/temp/temp20190509171902990/Trident/device/devspec/ntb/?><?path2project ..\?><?path2project-uri ../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" ditaarch:DITAArchVersion="1.2" class="- topic/topic " xml:lang="en-US" id="Address_Translation_9i26oiq3v" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)                            (topic struct-d)                            (topic firmware-d)                            (topic pmcrevhis-d)   " status="unchanged" xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="topic:1;10:27">
   <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="title:1;13:26">Address Translation</title>
   <body class="- topic/body " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="body:1;16:24">
      <note audience="PMCInternal" class="- topic/note " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="note:1;20:27">
         <simpletable relcolwidth="154* 846*" class="- topic/simpletable " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="simpletable:1;24:44">
            <strow class="- topic/strow " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="strow:1;27:35">
               <stentry class="- topic/stentry " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="stentry:1;30:42">Owner</stentry>
               <stentry class="- topic/stentry " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="stentry:2;33:42">FW</stentry>
            </strow>
            <strow class="- topic/strow " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="strow:2;37:35">
               <stentry class="- topic/stentry " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="stentry:3;40:42">References</stentry>
               <stentry class="- topic/stentry " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="stentry:4;43:43"/>
            </strow>
            <strow class="- topic/strow " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="strow:3;47:35">
               <stentry class="- topic/stentry " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="stentry:5;50:42">Goal</stentry>
               <stentry class="- topic/stentry " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="stentry:6;53:42">To describe the NT windowing and address translation windows</stentry>
            </strow>
         </simpletable>
      </note>
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="p:1;59:21">Switchtec uses a mix of direct address windows and lookup table sub-windows to forward PCIe traffic to EPs on the other side of the Non-Transparent EP (NT EP). This is accomplished by configuring the Base Address Registers (BAR) of the virtual EPs, to use translation windows. An address translation occurs when a packet hits an address of one of these translation windows. <xref href="#Address_Translation_9i26oiq3v/fig_NT_Window_Mapping_Inside_the_NT_EP_BAR_0i3hzwa92" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="xref:1;62:30" type="fig"><?ditaot gentext?>Figure 1</xref> illustrates the three options for using these two window types. They can be configured as just a direct Window, or a set of sub-windows, or even a combination of both. Each BAR can only contain one direct window and one set of sub-windows, and should always start at the bottom of the BAR.</p>
      <note audience="MSCCInternal" class="- topic/note " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="note:2;66:27">
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="p:2;69:24">Source Graphics: <xref href="http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=440043" scope="external" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="xref:2;73:33"><?ditaot usertext?>http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=440043 (page-1)</xref>
         </p>
      </note>
      <fig id="fig_NT_Window_Mapping_Inside_the_NT_EP_BAR_0i3hzwa92" class="- topic/fig " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="fig:1;79:25">
         <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="title:2;82:32">NT Window Mapping Inside the NT EP BAR</title>
         <image href="graphics/trident_ntb_bar_windows.svg" placement="inline" width="5in" class="- topic/image " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="image:1;88:33"/>
      </fig>
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="p:3;92:21">The translated base address is a 64-bit quantity, allowing the translated window to be located anywhere within the address space of the destination PCI Express domain. The upper 32-bits are set to zero when the translated base address is less than or equal to 0xFFFF_FFFF. The size of a PCI Express TLP header varies depending on the size of the address. A 32-bit address has a three DWord header while a 64-bit address has a four DWord header. Following formation of the translated address, the TLP header size is adjusted accordingly.</p>
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="p:4;95:21">In the simplest case, the example in <xref href="../../../../Saratoga/Device/ddd_hws/01_Applications/Usage_Examples/hws_nontransparent/Non-Transparent_Switch_Example_7i26oiq3v.xml#Non-Transparent_Switch_Example_7i26oiq3v/Example_of_a_dual-domain_non-transparent_8i26oiq3v" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="xref:3;98:30" type="fig"><?ditaot gentext?>Figure 1</xref>
         <draft-comment author="yungwesl" time="Mon 02/19/2018 05:29 PM" translate="no" class="- topic/draft-comment " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="draft-comment:1;104:48"> Need updated link to NTB usage example</draft-comment> uses NT Direct Window address translation to allow Host 1 to talk to Drives (B) and Host 2 to talk to Drives (A). Note that the NT direct window can be sized up to the NT EP BAR size. A simple offset is added to the base addresses of the base address register (BAR) corresponding to the NT EP (see <xref href="#Address_Translation_9i26oiq3v/Direct_Address_Translation_Direct_NT_Win_ai26oiq3v" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="xref:4;107:30" type="fig"><?ditaot gentext?>Figure 2</xref>).</p>
      <note audience="MSCCInternal" class="- topic/note " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="note:3;111:27">
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="p:5;114:24">Source Graphics: <xref href="http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=440043" scope="external" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="xref:5;118:33"><?ditaot usertext?>http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=440043 (page-2)</xref>
         </p>
      </note>
      <fig id="Direct_Address_Translation_Direct_NT_Win_ai26oiq3v" class="- topic/fig " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="fig:2;124:25">
         <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="title:3;127:32">Direct Address Translation - NT Direct Window</title>
         <image href="graphics/trident_ntb_direct_translation_window.svg" placement="break" width="4in" class="- topic/image " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="image:2;133:33"/>
      </fig>
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="p:6;137:21">In the more complicated case, the NT EP can also use a lookup table (LUT) to perform address translation. In this case, the transaction address will contain an index which can be used against a lookup table (see <xref href="#Address_Translation_9i26oiq3v/LUT_based_Address_Translation_NT_Sub-win_bi26oiq3v" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="xref:6;140:30" type="fig"><?ditaot gentext?>Figure 3</xref>). The size of the sub-windows must be a power of 2 and must be divided up into equal sizes.</p>
      <note audience="MSCCInternal" class="- topic/note " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="note:4;144:27">
         <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="p:7;147:24">Source Graphics: <xref href="http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=440043" scope="external" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="xref:7;151:33"><?ditaot usertext?>http://bby1dms01.pmc-sierra.internal/DocMgmt/fileinfo.cfm?file_id=440043 (page-3)</xref>
         </p>
      </note>
      <fig id="LUT_based_Address_Translation_NT_Sub-win_bi26oiq3v" class="- topic/fig " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="fig:3;157:25">
         <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="title:4;160:32">LUT based Address Translation - NT Sub-windows</title>
         <image href="graphics/trident_ntb_lut_address_translation_window.svg" placement="break" width="5in" class="- topic/image " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="image:3;166:33"/>
      </fig>
      <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\diffed\_b-0-file-\Trident\device\devspec\ntb\trident_ntb_address_translation.xml" xtrc="p:8;170:21">Using multiple NT windows will allow the host to access multiple address ranges within a single device, multiple devices within a partition, and even multiple devices across multiple partitions.</p>
   </body>
</topic>