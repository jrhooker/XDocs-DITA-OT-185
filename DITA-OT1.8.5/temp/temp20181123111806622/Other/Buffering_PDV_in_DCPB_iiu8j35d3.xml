<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\temp\temp20181123111806622\Other?><?workdir-uri file:/C:/Git/XDocs-DITA-OT-185/XDocs-DITA-OT-185/DITA-OT1.8.5/temp/temp20181123111806622/Other/?><?path2project ..\?><?path2project-uri ../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="Buffering_PDV_in_DCPB_iiu8j35d3" xml:lang="en-US" ditaarch:DITAArchVersion="1.2" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)                            (topic struct-d)                            (topic firmware-d)                            (topic pmcrevhis-d)                            a(props  sp-version)                            a(props  pmc_switch)                            a(props   pmc_package)                            a(props   pmc_phy)                            a(props   ddr-width)                            a(props   package)                            a(props   fw_package)                            a(props   pcie-drive-ports )                            a(props   pcie-host-ports)                            a(props   raid-support )                            a(props   sas-ports )                             a(props   media)                            a(props   component)   " class="- topic/topic " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="topic:1;2:125">
  <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="title:1;3:10">Buffering PDV in DCPB</title>

  <body class="- topic/body " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="body:1;5:9">
    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:1;6:8">Compensating for the maximum external latency ensures that the data
    stream can be switched between data sources of minimum and maximum latency
    without impacting the generated transmit signal, assuming that the
    difference between the maximum and minimum latency can be absorbed in the
    aggregate system PDV buffering. If the DCPB is configured to exclusively
    absorb the expected PDV, a data stream with the maximum latency in the
    fabric will have minimum data buffering occupied within the device. This
    physical FIFO occupancy in this scenario is depicted in <xref href="Compensating_for_PDV_in_the_Virtual_FIFO_fiu8j35d3.xml#Compensating_for_PDV_in_the_Virtual_FIFO_fiu8j35d3/Virtual_FIFO_giu8j35d3" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="xref:1;13:204" type="fig"><?ditaot gentext?>Figure 1</xref>
    .</p>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:2;16:8">Likewise, a data stream with minimum latency in the fabric will have
    maximum data buffering occupied within the DCPB switch. This scenario is
    depicted in <xref href="Buffering_PDV_in_DCPB_iiu8j35d3.xml#Buffering_PDV_in_DCPB_iiu8j35d3/PDV_Buffering_in_the_DCPB_jiu8j35d3" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="xref:2;18:135" type="fig"><?ditaot gentext?>Figure 1</xref>.</p>

    <note audience="MSCCInternal" class="- topic/note " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="note:1;20:35"><xref href="http://bby1dms01.pmc-sierra.internal/DocMgmt/getfile.cfm?file_id=427198" scope="external" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="xref:3;20:137"><?ditaot usertext?>
    http://bby1dms01.pmc-sierra.internal/DocMgmt/getfile.cfm?file_id=427198
    </xref> Min Fabric Latency tab</note>

    <fig id="PDV_Buffering_in_the_DCPB_jiu8j35d3" class="- topic/fig " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="fig:1;24:51">
      <title class="- topic/title " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="title:2;25:14">PDV Buffering in the DCPB with Minimum PDV</title>

      <image href="PDV_Buffering_in_the_DCPB.svg" placement="break" width="5.5in" class="- topic/image " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="image:1;27:84"/>
    </fig>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:3;30:8">If a data stream switches from a minimum to maximum latency signal, the
    fabric/ DCPB buffers will not overrun/underrun provided that there is
    sufficient DCPB PDV buffer capacity to absorb the difference in latency
    while keeping the virtual hysteresis buffer positioned correctly within
    the egress device DCPB. As data moves from the DCPB to the fabric, the
    latency through the virtual buffer seen by the Packet Monitor effectively
    remains constant. If there is insufficient DCPB buffer allocated for PDV,
    the hysteresis buffer will not be correctly positioned in the egress
    device DCPB, compromising flow control operations. These concepts are
    further explored in <xref href="Troubleshooting_Latency_Management_miu8j35d3.xml#Troubleshooting_Latency_Management_miu8j35d3" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="xref:4;39:133" type="topic"><?ditaot gentext?>Troubleshooting Latency Management</xref>.</p>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:4;41:8">The DCPB availability for PDV buffering is dependent on the number of
    available FIFO blocks provided in the device. The following formula can be
    used to calculate the required number of 128*64 byte DCPB blocks to buffer
    the PDV in the DCPB:</p>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:5;46:8">packing_factor = PKT_SIZE / (128 * CEILING(PKT_SIZE / 128) )</p>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:6;48:8"># of DCPB blocks = CEILING[data_rate(bps) * PDV(s) /
    (128*64*8*packing_factor)]</p>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:7;51:8">Notes on the above formula:</p>

    <ul class="- topic/ul " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="ul:1;53:9">
      <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="li:1;54:11"><p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:8;54:14">PDV(s) is the packet delay variation over the ILKN path in units
      of seconds</p></li>

      <li class="- topic/li " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="li:2;57:11"><p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:9;57:14">the CEILING function is the least integer that is greater than or
      equal to x </p></li>
    </ul>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:10;61:8">The DCPB buffer capacity is fixed. There are <b otherprops="bold" class="+ topic/ph hi-d/b " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="b:1;61:74">1600</b> blocks within the DCPB organized as <b otherprops="bold" class="+ topic/ph hi-d/b " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="b:2;61:140">25</b> pages each containing<b otherprops="bold" class="+ topic/ph hi-d/b " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="b:3;61:189"> 64</b>
    blocks. Users must ensure that internal block resources are not exhausted
    as per the buffer allocation guidelines outlined in <xref href="Storage_and_Flow_Control_Buffering_8iu327oir.xml" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="xref:5;63:120" type="topic"><?ditaot gentext?>Storage and Flow Control Buffering</xref>.
    If internal buffering is exhausted, external buffering may need to be
    considered. If some of the PDV is to be buffered externally, users must
    ensure that the aggregate buffer capacity in both the DCPB and external
    device is sufficient.</p>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:11;69:8">PDV buffering internal to the DCPB is communicated to the SW using the
    ilkn_info.fabric_egress_data.opsa_fifo.halt_buffer parameter of the <b otherprops="bold" class="+ topic/ph hi-d/b " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="b:4;70:94">g5_api_ilkn_cbr_prov() </b>API. Note that the XON/XOFF
    Buffering regions must also be accounted for in the halt_buffer setting if
    external PDV compensation is present in the system.</p>

    <p class="- topic/p " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="p:12;74:8">Refer to the <xref href="Storage_and_Flow_Control_Buffering_8iu327oir.xml" class="- topic/xref " xtrf="C:\Git\XDocs-DITA-OT-185\XDocs-DITA-OT-185\DITA-OT1.8.5\samples\digi\Other\Buffering_PDV_in_DCPB_iiu8j35d3.xml" xtrc="xref:6;74:84" type="topic"><?ditaot gentext?>Storage and Flow Control Buffering</xref>
    section of this document for additional DCPB switch FIFO sizing
    requirements.</p>
  </body>
</topic>